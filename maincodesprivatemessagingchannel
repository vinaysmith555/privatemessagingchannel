<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Secure TLK.io Chatroom</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f0f4ff;
    display: flex; justify-content: center; align-items: center;
    height: 100vh; margin: 0;
  }
  #password-screen {
    background: white;
    padding: 40px 60px;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    text-align: center;
  }
  #password-input {
    padding: 12px; width: 260px;
    border-radius: 8px; border: 1px solid #ccc;
    font-size: 1rem; margin-bottom: 15px;
  }
  #enter-btn {
    padding: 12px 30px; border: none;
    border-radius: 12px; background: #4a90e2;
    color: white; font-weight: 600; font-size: 1rem;
    cursor: pointer; transition: background-color 0.3s ease;
  }
  #enter-btn:hover { background: #357ae8; }
  #error-message { color: red; margin-top: 10px; display: none; }
  #chat-container {
    display: none; width: 100vw; max-width: 960px;
    height: 500px; flex-direction: column;
  }
  #chat-controls {
    margin-top: 10px; display: flex;
    justify-content: space-between; gap: 10px;
  }
  button.control-btn {
    padding: 10px 20px; border: none;
    border-radius: 10px; background: #e74c3c;
    color: white; cursor: pointer;
    transition: background 0.3s ease;
  }
  button.control-btn:hover { background: #c0392b; }

  /* Moderator section styling */
  #moderator-options {
    margin-top: 20px;
    text-align: center;
  }
  #moderator-options a {
    text-decoration: none;
    color: #4a90e2;
    margin: 0 10px;
    font-weight: 600;
    transition: color 0.3s ease;
  }
  #moderator-options a:hover {
    color: #357ae8;
  }
</style>
</head>
<body>

<div id="password-screen">
  <h2>Enter Password to Access Private Chat by VK</h2>
  <input type="password" id="password-input" placeholder="Enter password" />
  <div>
    <button id="enter-btn">Enter</button>
  </div>
  <div id="error-message">Incorrect password, please try again.</div>
  <div>This Private chat is secured by Vinay Kumawat. Ask him by email given below if you donâ€™t know the password.</div> 
</div>

<div id="chat-container">
  <div id="tlkio" 
    data-channel="privatechatbyvinay"
    data-nickname="User1"
    style="width:100%; height:400px; border:1px solid #ccc;">
  </div>
  <div id="chat-controls">
    <button id="logout" class="control-btn">Log Out</button>
  </div>

  <!-- Moderator Options Section -->
  <div id="moderator-options">
    <p>Options to connect real moderator :</p>
    <a href="https://instagram.com/vinaysmith555/" target="_blank">Instagram</a> |
    <a href="https://github.com/vinaysmith555" target="_blank">GitHub</a>
  </div>
</div>

<script async src="https://tlk.io/embed.js" type="text/javascript"></script>

<script>
  const PASSWORD = "VINAY999555222";
  const CLEAR_TIME_MS = 5 * 60 * 1000; // 5 minutes

  const passwordScreen = document.getElementById('password-screen');
  const chatContainer = document.getElementById('chat-container');
  const passwordInput = document.getElementById('password-input');
  const enterBtn = document.getElementById('enter-btn');
  const errorMessage = document.getElementById('error-message');
  const logoutBtn = document.getElementById('logout');

  enterBtn.addEventListener('click', verifyPassword);
  passwordInput.addEventListener('keydown', e => {
    if (e.key === 'Enter') verifyPassword();
  });

  function verifyPassword() {
    if (passwordInput.value.trim() === PASSWORD) {
      errorMessage.style.display = 'none';
      passwordScreen.style.display = 'none';
      chatContainer.style.display = 'flex';

      const lastLogout = localStorage.getItem('lastLogout');
      const now = Date.now();
      if (lastLogout && (now - parseInt(lastLogout, 10)) > CLEAR_TIME_MS) {
        clearChat();
        alert('Old messages cleared for privacy.');
      }
    } else {
      errorMessage.style.display = 'block';
    }
    passwordInput.value = '';
  }

  logoutBtn.addEventListener('click', () => {
    chatContainer.style.display = 'none';
    passwordScreen.style.display = 'block';
    localStorage.setItem('lastLogout', Date.now().toString());
  });

  function clearChat() {
    const frame = document.querySelector('iframe');
    if (frame) frame.src = frame.src;
  }
</script>

</body>
</html>
